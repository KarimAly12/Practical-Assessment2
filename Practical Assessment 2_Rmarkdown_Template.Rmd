---
title: "Data Wrangling"
author: "Student name submitting the assessment report comes here"
subtitle: Practical assessment 2
date: ""
output:
  html_notebook: default
  pdf_document: default
  html_document:
    df_print: paged
---


## **Setup**

```{r}

# Load the necessary packages required to reproduce the report. For example:

library(dplyr)
library(kableExtra)
library(magrittr)
library(readr)


```


## **Student names, numbers and percentage of contributions**
```{r, echo=FALSE}

# Add your names, numbers and percentage of your contribution here.

na<- c(" Karim Aly"," Bhanuchandu Bochu")
no<- c(" 4104031","  4120371")
pc<- c("Percentage1","  Percentage2")

s<- data.frame(cbind(na,no,pc))
colnames(s)<- c("Student name", "Student number", "Percentage of contribution")

s %>% kbl(caption = "Group information") %>%
  kable_classic(full_width = F, html_font = "Cambria")

```
<br>
<br>

## **Executive Summary**

In your own words, provide a brief summary of the preprocessing. Explain the steps that you have taken to preprocess your data. Write this section last after you have performed all data preprocessing. (Word count Max: 300 words)
You may use bulleted lists like this:

* a
* b
* ....

<br>
<br>

## **Data**

Provide explanations here.

```{r}

# Import the data, provide your R codes here.

# Import the data without column names
us_gdp_by_state_df <- read_csv("us-gdp-by-state.csv", show_col_types = FALSE)

#aus_real_estate_df$City <- toupper(aus_real_estate_df$City)


# Display the first few rows of the data frame
print(head(us_gdp_by_state_df))



```

```{r}
us_realtor_df <- read_csv("us-realtor-data.csv", show_col_types = FALSE)



print(head(us_realtor_df))

```

```{r}
merged_df = merged_df <- left_join(us_realtor_df, us_gdp_by_state_df, by = c("state" = "Area"))



print(tail(merged_df))
```

<br>
<br>

## **Understand** 

```{r}
print(str(merged_df))
```

```{r}
merged_df$status <- factor(merged_df$status, 
                      levels = c(1, 2, 3), 
                      labels = c("for_sale", "sold", "ready_to_build"))


merged_df$prev_sold_date <- as.Date(merged_df$prev_sold_date, format = "%d-%m-%Y")

print(str(merged_df))

```

```{r}
# Filter the dataset to include only Alabama
alabama_df <- merged_df[merged_df$state == "Alabama", ]

# Display the first few rows of the Alabama dataset
print(head(alabama_df))

# Display the dimensions of the Alabama dataset
print(dim(alabama_df))
```

```{r}


# This is the R chunk for the Understand Section

```

Provide explanations here. 

<br>
<br>

##	**Tidy & Manipulate Data I **

In the merged dataset some columns headers are values, not variables names. Columns '2013', '2014', '2015', '2016', '2017' are supposed to be under column year with the GDP for each year in different column.


```{r}

# This is the R chunk for the Tidy & Manipulate Data I 
merged_df <- merged_df %>% gather(`2013`, `2014`, `2015`, `2016`, `2017`, key = "year", value = "GDP")

tail(merged_df)

```

Provide explanations here. 

<br>
<br>

## **Tidy & Manipulate Data II** 

```{r}


###Question NO 6


# Create a new variable 'price_per_sqft' using base R
merged_df$price_per_sqft <- merged_df$price / merged_df$house_size

# Display the first few rows of the updated dataframe
print(head(merged_df))

# Summary statistics of the new variable
summary(merged_df$price_per_sqft)

print(tail(merged_df))

# This is the R chunk for the Tidy & Manipulate Data II 

```

Provide explanations here. 

<br>
<br>

##	**Scan I **
```{r}
# Filter the dataset to include only Alabama
alabama_df <- merged_df[merged_df$state == "Alabama", ]

# Display the first few rows of the Alabama dataset
print(head(alabama_df))

# Display the dimensions of the Alabama dataset
print(dim(alabama_df))
```

```{r}

# This is the R chunk for the Scan I

```

Provide explanations here. 

<br>
<br>

##	**Scan II**

```{r}

#Question 8

# This is the R chunk for the Scan II
detect_outliers <- function(x) {
  if(!is.numeric(x)) return(NA)
  Q1 <- quantile(x, 0.25, na.rm = TRUE)
  Q3 <- quantile(x, 0.75, na.rm = TRUE)
  IQR <- Q3 - Q1
  lower_bound <- Q1 - 1.5 * IQR
  upper_bound <- Q3 + 1.5 * IQR
  return(sum(x < lower_bound | x > upper_bound, na.rm = TRUE))
}

# Function to check for special values
check_special_values <- function(x) {
  if(is.numeric(x)) {
    return(c(sum(x == 0, na.rm = TRUE), sum(x < 0, na.rm = TRUE)))
  } else {
    return(c(NA, NA))
  }
}

# Check for missing values
missing_values <- colSums(is.na(alabama_df))
print("Missing values per column:")
print(missing_values)

# Check for potential special values
special_values <- sapply(alabama_df, check_special_values)
rownames(special_values) <- c("Zero_Count", "Negative_Count")
print("Potential special values:")
print(special_values)

# Detect outliers in each numeric column
outliers_count <- sapply(alabama_df, detect_outliers)
print("Number of outliers in each numeric column:")
print(outliers_count)

# Calculate percentage of outliers
outliers_percentage <- (outliers_count / nrow(alabama_df)) * 100
print("Percentage of outliers in each numeric column:")
print(outliers_percentage)

# Visualize distribution of a few key numeric variables
par(mfrow = c(2, 2))
hist(alabama_df$price, main = "Distribution of Price", xlab = "Price")
hist(alabama_df$house_size, main = "Distribution of House Size", xlab = "House Size")
hist(alabama_df$price_per_sqft, main = "Distribution of Price per Sq Ft", xlab = "Price per Sq Ft")
hist(as.numeric(alabama_df$prev_sold_date), main = "Distribution of Previous Sold Date", xlab = "Date")
par(mfrow = c(1, 1))

# Box plots for key numeric variables
boxplot(alabama_df$price, main = "Box Plot of Price")
boxplot(alabama_df$house_size, main = "Box Plot of House Size")
boxplot(alabama_df$price_per_sqft, main = "Box Plot of Price per Sq Ft")
```

Provide explanations here. 

<br>
<br>

##	**Transform **

```{r}
#question 9


# This is the R chunk for the Transform Section
library(dplyr)
library(moments)  # for skewness calculation

# Assuming 'merged_df' contains the variable 'price_per_sqft'
# We will apply a log transformation to 'price_per_sqft' to reduce skewness

# Check skewness before transformation
skewness_before <- skewness(merged_df$price_per_sqft, na.rm = TRUE)
print(paste("Skewness before log transformation:", skewness_before))

# Apply log transformation
merged_df$log_price_per_sqft <- log(merged_df$price_per_sqft)

# Check skewness after transformation
skewness_after <- skewness(merged_df$log_price_per_sqft, na.rm = TRUE)
print(paste("Skewness after log transformation:", skewness_after))

# Visualizing the distribution before and after transformation
par(mfrow = c(1, 2))
hist(merged_df$price_per_sqft, main = "Price per Sqft (Before)", xlab = "Price per Sqft", col = "blue")
hist(merged_df$log_price_per_sqft, main = "Log-Transformed Price per Sqft", xlab = "Log(Price per Sqft)", col = "green")
par(mfrow = c(1, 1))
```

Provide explanations here. 


<br>
<br>

##	**Presentation **

Add the link to your presentation inside the brackets below.

[Presentation](...)

